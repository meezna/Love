<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You üå∏</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://www.transparenttextures.com/patterns/white-diamond.png'), floralwhite;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
    }
    .notebook {
      background: #fffaf0;
      border: 2px solid #f8c8dc;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(255, 182, 193, 0.5);
      padding: 2rem;
      max-width: 700px;
      width: 100%;
      line-height: 1.6;
      white-space: pre-wrap;
      display: none;
      position: relative;
    }
    .entry {
      font-size: 1.1rem;
      color: #4b2e2e;
    }
    .input-section {
      text-align: center;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 20px;
      font-size: 1rem;
      background-color: #f48fb1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
    }
    .message {
      text-align: center;
      font-size: 1.2rem;
      margin-top: 20px;
      color: #c62828;
    }
  </style>
</head>
<body>
  <audio id="bg-music" src="Grx.mp3" loop></audio>

  <div class="input-section" id="inputSection">
    <h2>What‚Äôs your name?</h2>
    <input type="text" id="nameInput" placeholder="Enter your full name" />
    <br />
    <button onclick="checkName()">Submit</button>
    <div class="message" id="message"></div>
  </div>

  <div class="notebook" id="letter">
    <div class="entry" id="typedText"></div>
    <button id="replayBtn" onclick="replayLetter()" style="display:none; margin-top: 2rem;">üîÅ Replay Letter</button>
  </div>

  <script>
    const correctName = "Manju Gurung";
    const letterText = `Dear Meezna,

How do I begin...
Ever since you came into my life,
my words stopped belonging to anyone else.
You are the only one whose silence feels like poetry to me.
Talking to you feels like I'm speaking to my own soul.

Every moment we‚Äôve shared in words ‚Äî
the laughter, the silence,
they‚Äôve all become quiet reasons for me to keep going.

Even without a physical meeting,
you‚Äôve touched places in my heart I didn‚Äôt know existed.
And that‚Äôs what makes this connection so real.

But lately, you‚Äôve been busy in your own world,
living a life that doesn't include me.
And I‚Ä¶ I keep remembering you ‚Äî
wishing to speak, but afraid to cross a line.
When we talk less, something inside me quietly breaks.

I know...
I'm just a "friend" in your world.
But my heart never settled for that.
It keeps calling you ‚Äúmine‚Äù ‚Äî
not to claim, but to cherish.
Like someone who never stood beside you,
yet feels close in every heartbeat.

Sometimes I wonder ‚Äî
is this love, or is it longing?
Or a beautiful curse wrapped in care?

Maybe I‚Äôm selfish ‚Äî
not because I want you for myself,
but because I don‚Äôt want to lose this bond.

But I‚Äôve never wanted to take anything from you,
I just wanted to stay close to your smile.

This isn't just conversation ‚Äî
it's a connection, and it lives inside me.

---

Meezna,
If I ever get another life,
I‚Äôd still choose to be Sabdpremi ‚Äî
the one who writes for you,
thinks of you,
waits for you,
loves you ‚Äî even in silence.

Always yours,
Sabdpremi`;

    let synth, voice, index = 0, typingInterval;
    const bgMusic = document.getElementById("bg-music");

    function checkName() {
      const input = document.getElementById("nameInput").value.trim();
      if (input.toLowerCase() === correctName.toLowerCase()) {
        document.getElementById("inputSection").style.display = "none";
        document.getElementById("letter").style.display = "block";
        startLetter();
      } else {
        document.getElementById("message").innerText = "Oops! This is not for you üíî";
      }
    }

    function startLetter() {
      const textBox = document.getElementById("typedText");
      const replayBtn = document.getElementById("replayBtn");
      textBox.innerText = "";
      replayBtn.style.display = "none";
      index = 0;
      synth = window.speechSynthesis;

      voice = synth.getVoices().find(v =>
        v.name.toLowerCase().includes("daniel") ||
        v.name.toLowerCase().includes("google us english") ||
        v.name.toLowerCase().includes("english") && !v.name.toLowerCase().includes("female")
      );

      bgMusic.currentTime = 0;
      bgMusic.volume = 0.2;
      bgMusic.pause(); // mute music during speaking
      speakWhileTyping(textBox, replayBtn);
    }

    function speakWhileTyping(textBox, replayBtn) {
      if (index < letterText.length) {
        const char = letterText.charAt(index);
        textBox.innerText += char;

        if (char === '.' || char === '\n' || char === '?' || char === '!') {
          const lastLine = textBox.innerText.split('\n').slice(-1)[0].trim();
          const utter = new SpeechSynthesisUtterance(lastLine);
          if (voice) utter.voice = voice;
          utter.rate = 1;
          utter.pitch = 1;
          synth.speak(utter);
        }

        index++;
        typingInterval = setTimeout(() => speakWhileTyping(textBox, replayBtn), 30);
      } else {
        setTimeout(() => {
          bgMusic.play(); // resume music after finish
        }, 500);
        replayBtn.style.display = "inline-block";
      }
    }

    function replayLetter() {
      speechSynthesis.cancel();
      clearTimeout(typingInterval);
      bgMusic.pause(); // pause again on replay
      startLetter();
    }

    window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>
